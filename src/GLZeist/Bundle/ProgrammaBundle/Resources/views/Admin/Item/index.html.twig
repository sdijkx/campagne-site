{% extends "GLZeistProgrammaBundle::admin.html.twig" %} 
{%block content%}
<h1>Item overzicht</h1>
<ul  class="actions clearfix">
    <li>
        <a href="{{ path('item_new') }}">
            Nieuw item toevoegen
        </a>
    </li>
</ul>
<div>
    <form method="GET">    
        <div>
            <input type="text" name="search" value="{{search}}"/>
            <button type="submit"><span class="icon-search">&nbsp;</span></button>
            <button type="submit" onclick="javascript:this.form.elements[0].value='';this.form.submit()">
                <span class="icon-cancel">&nbsp;</span>
            </button>
        </div>
        <label>Sorteer</label>&nbsp;<select name="orderby" onchange="javascript:this.form.submit();">
            {%for field,name in fields%}
                <option {%if orderBy==field %}selected="selected"{%endif%} value="{{field}}">{{name}}</option>
            {%endfor%}
        </select>
        <input type="radio" name="sortorder" value="ASC" {%if sortOrder == 'ASC' %} checked="checked" {%endif%} onchange="javascript:this.form.submit();"/> 
        <label>Oplopend</label>
        <input type="radio" name="sortorder" value="DESC" {%if sortOrder == 'DESC' %} checked="checked" {%endif%} onchange="javascript:this.form.submit();" />
        <label>Aflopend</label>
    </form>
</div>
{{macros.paging(page,pageCount,'admin_item',{search:search,orderby:orderBy,page:page})}}
<div class="results">
    {%if entities|length == 0 %}
        <h3>Geen resultaten</h3>
    {%endif%}

    {% for entity in entities %}
        <div class="item entry clearfix">
            <h2>{{ entity.titel }} - <i>{{entity.thema.titel}}</i></h2>
            <div class="extra">
                {%if entity.gepubliceerd %}
                    <div class="notice"><strong>Gepubliceerd</strong></div>
                {%elseif entity.aangevraagd %}
                    <div class="notice"><strong>Publicatie aangevraagd</strong></div>
                {%elseif entity.gewijzigdNaPublicatie %}
                    <div class="notice"><strong>Gewijzigd na laatste publicatie</strong></div>
                {%endif%}
                {%if entity.gepubliceerd %}
                    <div><label>Laatste publicatie:</label>&nbsp;{{entity.publishedItem.gepubliceerdOp|date('d-m-Y H:i:s')}}</div>
                    <br/>
                {%endif%}

            </div>

            <div class="content clearfix" >
                <ul class="actions" style="float:left;margin-top:0;">
                    <li>
                        <a title="Bewerk" href="{{ path('item_edit', { 'id': entity.id }) }}"><span class="icon-pencil">&nbsp;</span></a>
                    </li>
                </ul>
                <div class="description">
                    <div>{{ entity.kernboodschap|raw }}</div>
                </div>
                <div class="thumb" style="float:right;width:120px%">
                    {%if entity.thumbfile %}
                        <img src="{{path('file',{filename:entity.thumbfile})}}" />
                    {%else%}
                        &nbsp;
                    {%endif%}
                </div>
            </div>
            <div class="info">

                <div><label>Auteur:</label>&nbsp;{{entity.gemaaktDoor.username}}</div>
                <div><label>Laatst gewijzigd:</label>&nbsp;{{entity.gewijzigdOp|date('d-m-Y H:i:s')}}</div>
                <div><label>Gemaakt:</label>&nbsp;{{entity.gemaaktOp|date('d-m-Y H:i:s')}}</div>

            </div>
        </div>
    {% endfor %}
</div>
{%endblock%}